{"ast":null,"code":"import _objectSpread from\"/Users/jamieaquila/git/humareso/signatures/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./TemplateEditor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TemplateEditor(_ref){let{templates,selectedAd,onTemplateUpdate}=_ref;const[localTemplates,setLocalTemplates]=useState(templates);const[isEditing,setIsEditing]=useState(false);useEffect(()=>{setLocalTemplates(templates);},[templates]);const updateAdInTemplate=(template,adUrl)=>{if(!adUrl)return template;// Find and replace the ad image in the template\nconst adRegex=/<img[^>]*src=\"[^\"]*Email_Ads[^\"]*\"[^>]*>/i;const newAdHtml=\"<img style=\\\"border-radius:4px; -webkit-border-radius:4px; -o-border-radius:4px; -ms-border-radius:4px; -moz-border-radius:4px; overflow: hidden; \\\"src=\\\"\".concat(adUrl,\"\\\" role=\\\"presentation\\\" width=\\\"485\\\" class=\\\"image__StyledImage-sc-hupvqm-0 kUXePh\\\" style=\\\"display: block; max-width: 485px;\\\">\");if(adRegex.test(template)){return template.replace(adRegex,newAdHtml);}// If no existing ad found, insert after the OOO section\nconst oooEndIndex=template.indexOf('<!-- End OOO -->');if(oooEndIndex!==-1){const beforeOoo=template.substring(0,oooEndIndex+'<!-- End OOO -->'.length);const afterOoo=template.substring(oooEndIndex+'<!-- End OOO -->'.length);const adSection=\"\\n<!-- Start Ad -->\\n\\t\\t<tr>\\n\\t\\t\\t<td height=\\\"16\\\">\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t\\t<tr>\\n\\t\\t\\t<td width=\\\"485\\\" height=\\\"125\\\">\\n\\t\\t\\t\\t<a href=\\\"https://humareso.com/?utm_campaign=none&utm_source=email&utm_medium=signature&utm_term=generic&utm_content=block_ad\\\">\\n\\t\\t\\t\\t\\t\".concat(newAdHtml,\"\\n\\t\\t\\t\\t</a>\\t\\t\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n<!-- End Ad -->\");return beforeOoo+adSection+afterOoo;}return template;};const handleTemplateChange=(platform,content)=>{setLocalTemplates(prev=>_objectSpread(_objectSpread({},prev),{},{[platform]:content}));};const handleSave=()=>{// Update both templates with the selected ad\nconst updatedTemplates={o365:updateAdInTemplate(localTemplates.o365,selectedAd===null||selectedAd===void 0?void 0:selectedAd.url),hubspot:updateAdInTemplate(localTemplates.hubspot,selectedAd===null||selectedAd===void 0?void 0:selectedAd.url)};onTemplateUpdate(updatedTemplates);setIsEditing(false);};const handleCancel=()=>{setLocalTemplates(templates);setIsEditing(false);};const insertAdButton=platform=>{if(!selectedAd)return null;return/*#__PURE__*/_jsx(\"button\",{className:\"insert-ad-btn\",onClick:()=>{const updated=updateAdInTemplate(localTemplates[platform],selectedAd.url);handleTemplateChange(platform,updated);},children:\"Insert Selected Ad\"});};return/*#__PURE__*/_jsxs(\"div\",{className:\"template-editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Template Editor\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Edit your email signature templates for Office 365 and HubSpot\"}),selectedAd&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-ad-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Selected Ad: \",selectedAd.name]}),/*#__PURE__*/_jsx(\"img\",{src:selectedAd.url,alt:selectedAd.name,className:\"selected-ad-thumb\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn \".concat(isEditing?'editing':''),onClick:()=>setIsEditing(!isEditing),children:isEditing?'Cancel Editing':'Edit Templates'}),isEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"save-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:handleSave,children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:handleCancel,children:\"Cancel\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"templates-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"template-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Office 365 Template\"}),insertAdButton('o365'),/*#__PURE__*/_jsx(\"textarea\",{value:localTemplates.o365,onChange:e=>handleTemplateChange('o365',e.target.value),disabled:!isEditing,className:\"template-textarea\",placeholder:\"Office 365 signature template...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"template-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"HubSpot Template\"}),insertAdButton('hubspot'),/*#__PURE__*/_jsx(\"textarea\",{value:localTemplates.hubspot,onChange:e=>handleTemplateChange('hubspot',e.target.value),disabled:!isEditing,className:\"template-textarea\",placeholder:\"HubSpot signature template...\"})]})]}),!selectedAd&&/*#__PURE__*/_jsx(\"div\",{className:\"no-ad-warning\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u26A0\\uFE0F No ad selected. Please select an ad in the Ad Management tab before editing templates.\"})})]});}export default TemplateEditor;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","TemplateEditor","_ref","templates","selectedAd","onTemplateUpdate","localTemplates","setLocalTemplates","isEditing","setIsEditing","updateAdInTemplate","template","adUrl","adRegex","newAdHtml","concat","test","replace","oooEndIndex","indexOf","beforeOoo","substring","length","afterOoo","adSection","handleTemplateChange","platform","content","prev","_objectSpread","handleSave","updatedTemplates","o365","url","hubspot","handleCancel","insertAdButton","className","onClick","updated","children","name","src","alt","value","onChange","e","target","disabled","placeholder"],"sources":["/Users/jamieaquila/git/humareso/signatures/client/src/components/TemplateEditor.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './TemplateEditor.css';\n\nfunction TemplateEditor({ templates, selectedAd, onTemplateUpdate }) {\n  const [localTemplates, setLocalTemplates] = useState(templates);\n  const [isEditing, setIsEditing] = useState(false);\n\n  useEffect(() => {\n    setLocalTemplates(templates);\n  }, [templates]);\n\n  const updateAdInTemplate = (template, adUrl) => {\n    if (!adUrl) return template;\n    \n    // Find and replace the ad image in the template\n    const adRegex = /<img[^>]*src=\"[^\"]*Email_Ads[^\"]*\"[^>]*>/i;\n    const newAdHtml = `<img style=\"border-radius:4px; -webkit-border-radius:4px; -o-border-radius:4px; -ms-border-radius:4px; -moz-border-radius:4px; overflow: hidden; \"src=\"${adUrl}\" role=\"presentation\" width=\"485\" class=\"image__StyledImage-sc-hupvqm-0 kUXePh\" style=\"display: block; max-width: 485px;\">`;\n    \n    if (adRegex.test(template)) {\n      return template.replace(adRegex, newAdHtml);\n    }\n    \n    // If no existing ad found, insert after the OOO section\n    const oooEndIndex = template.indexOf('<!-- End OOO -->');\n    if (oooEndIndex !== -1) {\n      const beforeOoo = template.substring(0, oooEndIndex + '<!-- End OOO -->'.length);\n      const afterOoo = template.substring(oooEndIndex + '<!-- End OOO -->'.length);\n      \n      const adSection = `\n<!-- Start Ad -->\n\t\t<tr>\n\t\t\t<td height=\"16\">\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td width=\"485\" height=\"125\">\n\t\t\t\t<a href=\"https://humareso.com/?utm_campaign=none&utm_source=email&utm_medium=signature&utm_term=generic&utm_content=block_ad\">\n\t\t\t\t\t${newAdHtml}\n\t\t\t\t</a>\t\t\n\t\t\t</td>\n\t\t</tr>\n<!-- End Ad -->`;\n      \n      return beforeOoo + adSection + afterOoo;\n    }\n    \n    return template;\n  };\n\n  const handleTemplateChange = (platform, content) => {\n    setLocalTemplates(prev => ({\n      ...prev,\n      [platform]: content\n    }));\n  };\n\n  const handleSave = () => {\n    // Update both templates with the selected ad\n    const updatedTemplates = {\n      o365: updateAdInTemplate(localTemplates.o365, selectedAd?.url),\n      hubspot: updateAdInTemplate(localTemplates.hubspot, selectedAd?.url)\n    };\n    \n    onTemplateUpdate(updatedTemplates);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setLocalTemplates(templates);\n    setIsEditing(false);\n  };\n\n  const insertAdButton = (platform) => {\n    if (!selectedAd) return null;\n    \n    return (\n      <button \n        className=\"insert-ad-btn\"\n        onClick={() => {\n          const updated = updateAdInTemplate(localTemplates[platform], selectedAd.url);\n          handleTemplateChange(platform, updated);\n        }}\n      >\n        Insert Selected Ad\n      </button>\n    );\n  };\n\n  return (\n    <div className=\"template-editor\">\n      <div className=\"section-header\">\n        <h3>Template Editor</h3>\n        <p>Edit your email signature templates for Office 365 and HubSpot</p>\n        {selectedAd && (\n          <div className=\"selected-ad-info\">\n            <span>Selected Ad: {selectedAd.name}</span>\n            <img src={selectedAd.url} alt={selectedAd.name} className=\"selected-ad-thumb\" />\n          </div>\n        )}\n      </div>\n\n      <div className=\"editor-controls\">\n        <button \n          className={`edit-btn ${isEditing ? 'editing' : ''}`}\n          onClick={() => setIsEditing(!isEditing)}\n        >\n          {isEditing ? 'Cancel Editing' : 'Edit Templates'}\n        </button>\n        {isEditing && (\n          <div className=\"save-controls\">\n            <button className=\"save-btn\" onClick={handleSave}>\n              Save Changes\n            </button>\n            <button className=\"cancel-btn\" onClick={handleCancel}>\n              Cancel\n            </button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"templates-container\">\n        <div className=\"template-section\">\n          <h4>Office 365 Template</h4>\n          {insertAdButton('o365')}\n          <textarea\n            value={localTemplates.o365}\n            onChange={(e) => handleTemplateChange('o365', e.target.value)}\n            disabled={!isEditing}\n            className=\"template-textarea\"\n            placeholder=\"Office 365 signature template...\"\n          />\n        </div>\n\n        <div className=\"template-section\">\n          <h4>HubSpot Template</h4>\n          {insertAdButton('hubspot')}\n          <textarea\n            value={localTemplates.hubspot}\n            onChange={(e) => handleTemplateChange('hubspot', e.target.value)}\n            disabled={!isEditing}\n            className=\"template-textarea\"\n            placeholder=\"HubSpot signature template...\"\n          />\n        </div>\n      </div>\n\n      {!selectedAd && (\n        <div className=\"no-ad-warning\">\n          <p>⚠️ No ad selected. Please select an ad in the Ad Management tab before editing templates.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default TemplateEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}